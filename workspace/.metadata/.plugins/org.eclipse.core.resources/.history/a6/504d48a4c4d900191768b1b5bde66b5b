scchart pacemaker {
  input signal ASense, VSense, AEIEnd, AVIEnd;
  output signal APace, VPace, AEIStart, AVIStart;

  initial state main { 
  	/* AVI – Atrioventricular Interval
	The maximum time between an atrial event and its subsequent ventricular event */
    region AVI:
	
	initial state idle
		--> V_wait with ASense
		--> V_wait with APace;
	connector state V_wait
		--> AVI_on immediate with VSense
		--> AVI_on immediate with VPace;
	state AVI_on
		--> idle with VSense || VPace;
	
	/* PVARP – Post-Ventricular Atrial Refractory Period
	The time after a ventricular event where any atrial events are ignored as Atrial
	Refractory (AR) signals */
    region PVARP:

    initial state idle;

	/* VRP – Ventricular Refractory Period
	The time after a ventricular event where any other ventricular events are ignored as
	Ventricular Refractory (VR) signals */
    region VRP:

    initial state idle;
    
	/* AEI – Atrial Escape Interval
	The maximum time between a ventricular event and its subsequent atrial event */
    region AEI:

    initial state idle
		--> A_wait with VSense
		--> A_wait with VPace;
	state AEI_on
		--> idle with ASense || APace;
	/*connector state A_wait
		--> AEI_on immediate with ASense
		--> AEI_on immediate with APace; */

	/* LRI – Lower Rate Interval
	The slowest rate at which the heart is allowed to operate. This is measured as the time
	between ventricular events */
    region LRI:
    

    initial state idle;
    
	/* URI – Upper Rate Interval
	The fastest rate at which the pacemaker will ever pace the heart at. This is measured
	as the time between ventricular events */
    region URI:

    initial state idle;
  };
}